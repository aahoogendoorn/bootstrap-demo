<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:composite="http://java.sun.com/jsf/composite"
        >

	<!-- INTERFACE -->
	<composite:interface >
		<composite:attribute name="id" type="java.lang.String" />
		<composite:attribute name="style" type="java.lang.String" />
	</composite:interface>

	<!-- IMPLEMENTATION -->
	<composite:implementation>
		<h:form id="#{cc.attrs.id}" prependId="false" style="#{cc.attrs.style}"  >
			<h:outputScript>
                //<![CDATA[

                function DefaultButtonHandler() {
                    var defaultButtonClicked = false;

                    this.clickDefaultButton = function () {
                        if (this.defaultButtonClicked) {
                            return;
                        }
                        this.defaultButtonClicked = true;

                        $('.defaultButton').first().click();
                    }

                    this.handleKeypressDefaultButton = function(event){
                        if ( event.which == 13 && this.isValidEventSource(event)) {
                            this.clickDefaultButton();
                            event.stopPropagation();
                            event.preventDefault();
                            return false;
                        }

                        return true;
                    }

                    this.isValidEventSource = function(event){
                        if ($(event.target).is('textarea')) return false;

                        return true;
                    }

                }

				$(document).ready(function () {
                    $('##{cc.attrs.id}\\:#{cc.attrs.id}').keypress(function(event){ new DefaultButtonHandler().handleKeypressDefaultButton(event)});
                });

            //]]>
			</h:outputScript>
			<composite:insertChildren />
		</h:form>
	</composite:implementation>
</ui:composition>