<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:composite="http://java.sun.com/jsf/composite"
                xmlns:a4j="http://richfaces.org/a4j"
        >

    <!-- INTERFACE -->
    <composite:interface>
        <composite:attribute name="required" type="java.lang.Boolean" default="false"/>
        <composite:attribute name="readonly" type="java.lang.Boolean" default="false"/>
        <composite:attribute name="label" type="java.lang.String"/>
        <composite:attribute name="checkboxLabel" type="java.lang.String"/>
        <composite:attribute name="value" type="java.lang.Boolean"/>
        <composite:attribute name="tabindex" type="java.lang.String"/>
        <composite:attribute name="styleClass" type="java.lang.String"/>

        <composite:attribute name="action"  targets="klikActie"/>
        <composite:attribute name="onclick" type="java.lang.String"/>

        <composite:facet name="checkboxLabel" />
    </composite:interface>

    <!-- IMPLEMENTATION -->
    <composite:implementation>
        <h:panelGroup layout="block" styleClass="#{component.findComponent('checkbox').valid?'':' has-error'}">
            <h:outputLabel value="#{cc.attrs.label}" rendered="#{not empty cc.attrs.label}"/>

            <div class="checkbox checkbox-success #{cc.attrs.styleClass}">
                <h:selectBooleanCheckbox
                            value="#{cc.attrs.value}"
                            id="checkbox"
                            required="#{cc.attrs.required}"
                            disabled="#{cc.attrs.readonly}"
                            tabindex="#{cc.attrs.tabindex}"
                            onclick="#{not empty cc.attrs.onclick? cc.attrs.onclick.concat('();'):''} klikActie#{cc.clientId.replaceAll(':', '')}()"
                            >
                        <composite:insertChildren/>
                        <!--<a4j:ajax  event="change" execute="@form" render="@form" onbeforedomupdate="klikActie#{cc.clientId.replaceAll(':', '')}()"/>-->
                    </h:selectBooleanCheckbox>
                <h:outputLabel for="checkbox">
                    <h:outputText value="#{cc.attrs.checkboxLabel}" rendered="#{not empty cc.attrs.checkboxLabel and empty cc.facets.checkboxLabel}"/>
                    <composite:renderFacet name="checkboxLabel"/>
                </h:outputLabel>

                <a4j:jsFunction  name="klikActie#{cc.clientId.replaceAll(':', '')}" id="klikActie" execute="@form" render="@form"/>
            </div>


        </h:panelGroup>

    </composite:implementation>
</ui:composition>